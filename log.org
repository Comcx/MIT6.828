#+TITLE: MIT6.828 OS Studying log
#+AUTHOR: Comcx
#+DATE: <2019-01-19 Sat>


* LEC 1
SCHEDULED: <2019-01-20 Sun>

** DONE Xv6 resources got!
** DONE Unix Intro
** TODO [50%] LAB 1
*** DONE Got LAB resources
*** NEXT [Exercise 1] Learning Assembly languages
**** NEXT Got Assembly book -> learning Intel assembly syntax
**** TODO [Book] Brennan's Guide to Inline Assembly -> 
     learn AT&T syntax, which is semantically equivalent to Intel syntax.

*** DONE Build JOS environment [little difficult]
**** DONE Build *QEMU*
To build qemu for 6.828, one need to follow the instructions written
on 6.828 offical guide!
I followed everything in guide, but I still ran into /error/ while trying to
install /qemu/:
- *Situation 1: Python2.7 needed*
We have to use python under version 3 :(  

*[Solution]* Install python2.7, in my Arch, command:
#+begin_src shell
sudo pacman -S python2
#+end_src
then, in configuration phase, add option: --python=python2.7

- *Situation 2: Undefined reference to major or minor*
This cost me large amount of time to fix.
Finally, I found this /upgrade/

Android's had <sys/sysmacros.h> for a long time, we are likely to
remove the transtive include from <sys/types.h>

Therefore,
  
*[Solution]* add code:
#+begin_src c
#include <sys/sysmacros.h>
#+end_src

- *Situation 3: qemu-nox*
Since I am using pure tty in Arch, when I tried to command:

make qemu,
  
I got /error/: could not connect server.

*[Solution]* use command:  
#+begin_src shell
make qemu-nox
#+end_src

Now I've successfully built /QEMU/ environment! :)


**** DONE Debugging *QEMU*
Unfortunately, I ran into trouble again while debugging.
I followed instructions:
1) Command:
#+begin_src shell
make qemu-gdb
#+end_src
2) Open another terminal window, command in the same directory:
#+begin_src shell
make gdb
#+end_src

then, I got error message:
#+begin_src
error while loading shared libraries: libreadline.so.8
#+end_src

I tried to upgrade readline:
#+begin_src shell
sudo pacman -S readline
#+end_src

Then, cd /usr/lib, I found:

libreadline.so.8

which is already up-to-date.

However, when I ran: make qemu-gdb, error occurred again:
#+begin_src
error while loading shared libraries: libreadline.so.7
#+end_src

This time lack version 7 2333333333 :(
Finally, I cd /usr/lib, command:
#+begin_src shell
sudo ln -s libreadline.so.7 libreadline.so.8
#+end_src
to get both version 7 and 8 and everything's ok now.





*** NEXT Simiulating PC & Debug
**** DONE [Exercise 2] Follow BIOS steps by command _si_
**** DONE Understanding PC's physical address & boot
***** TODO [Book] Phil Storrs PC Hardware book

**** TODO Understanding the *Boot loader*
***** DONE The Boot sector
Most boot codes lies in the first sector of a bootable device(e.g. CD-ROM).
However, Some modern machines are now using 2 sectors to load boot codes.

See _"El Torito" Bootable CD-ROM Format Specification._

***** TODO Read the Boot Codes







